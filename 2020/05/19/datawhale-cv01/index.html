






<!doctype html>
<html lang="zh">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Kenny Ng">
  
  
  
  
    <meta name="description" content="CV训练营-笔记1-赛题研究这次基础赛事, 是Datawhale与天池联合发起的零基础入门系列赛事 赛事地址
本文目的
总结基本了解比赛规则
总结解题思路
数据下载和理解

1.规则本赛题需要选手识别图片中所有的字符。评测指标：准确率，Score=编码识别正确的数量/测试集图片数量
为了降低比赛难度，我们提供了训练集、验证集中所有字符的位置框（在阿里天池上下载）。
注意: 按照比赛规则，所有...">
  
  <title>Datawhaile-CV训练营-笔记1 [ 池中之物 ]</title>
  
  
    <link rel="shortcut icon" href="/Kenny_Ng.github.io/hollow.ico">
  
  
  
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/random.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/vegas.min.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/highlight-railscasts.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/jquery.fancybox.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/Kenny_Ng.github.io/css/plyr.css">

  
<meta name="generator" content="Hexo 4.2.1"></head>

<body>
<div class="side-navigate hide-area">
  
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4"/>
          <div id="homelink">池中之物</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/Kenny_Ng.github.io/index.html">Home</a>
            
          </li>
        
          
            <li>
          
            <a href="/Kenny_Ng.github.io/archives">Archives</a>
            
          </li>
        
          
            <li>
          
            <a href="/Kenny_Ng.github.io/tags">Tags</a>
            
          </li>
        
          
            <li>
          
            <a href="/Kenny_Ng.github.io/categories">Categories</a>
            
          </li>
        
          
            <li>
          
            <a href="/Kenny_Ng.github.io/about">About</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/stiekel" target="_blank" rel="noopener">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      
      
  

  <article id="post">
    <h1>Datawhaile-CV训练营-笔记1</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2020-05-19</span>
      
        <span id = "post-title-updated">Updated at 2020-05-20</span>
      
      
      
      <span id = "post-title-tags">
      Tag
      
      
        
        
        <a href="/Kenny_Ng.github.io/tags/ML/">ML</a>
      
        
          /
        
        
        <a href="/Kenny_Ng.github.io/tags/CV/">CV</a>
      
        
          /
        
        
        <a href="/Kenny_Ng.github.io/tags/datawhale-org/">datawhale.org</a>
      
      </span>
      
    </p>
    
    <h1 id="CV训练营-笔记1-赛题研究"><a href="#CV训练营-笔记1-赛题研究" class="headerlink" title="CV训练营-笔记1-赛题研究"></a>CV训练营-笔记1-赛题研究</h1><p>这次<strong>基础</strong>赛事, 是Datawhale与天池联合发起的零基础<strong>入门系列</strong>赛事 <a href="https://tianchi.aliyun.com/competition/entrance/531795/introduction" target="_blank" rel="noopener">赛事地址</a></p>
<h2 id="本文目的"><a href="#本文目的" class="headerlink" title="本文目的"></a>本文目的</h2><ol>
<li><strong>总结</strong>基本了解比赛规则</li>
<li><strong>总结</strong>解题思路</li>
<li>数据下载和<strong>理解</strong></li>
</ol>
<h3 id="1-规则"><a href="#1-规则" class="headerlink" title="1.规则"></a>1.规则</h3><p>本赛题需要选手<u>识别图片中所有的字符</u>。<strong>评测指标</strong>：准确率，Score=编码识别正确的数量/测试集图片数量</p>
<p>为了降低比赛难度，我们提供了训练集、验证集中所有字符的<u><strong>位置框</strong></u>（在<strong>阿里天池</strong>上下载）。</p>
<p><strong>注意</strong>: 按照比赛规则，所有的参赛选手，<strong>只能使用比赛给定的数据集完成训练(不要使用SVHN原始数据集进行训练</strong>） </p>
<h4 id="使用的Python模块"><a href="#使用的Python模块" class="headerlink" title="使用的Python模块"></a>使用的Python模块</h4><p>大概介绍一下，这里可能需要用到的主要模块。</p>
<blockquote>
<p>numpy ：提供了python对多维数组对象的支持：ndarray，具有矢量运算能力，快速、节省空间。numpy支持高级大量的维度数组与矩阵运算，此外也针对数组运算提供大量的数学函数库。</p>
<p>torch：神经网络界的 Numpy, 因为他能将 torch 产生的 tensor 放在 GPU 中加速运算 (前提是你有合适的 GPU), 就像 Numpy 会把 array 放在 CPU 中加速运算. 所以神经网络的话, 当然是用 Torch 的 tensor 形式数据最好</p>
<p>torchvision：torchvision包是服务于pytorch深度学习框架的,用来生成图片,视频数据集,和一些流行的模型类和预训练模型。我认为这个是最关键的模块</p>
<p>OpenCV（import时候是cv2）：一款强大的跨平台的计算机视觉库，使用它能完成我们对于图像和视频处理的很多功能。它以电信号的方式加以捕捉、记录、处理、储存、传送与重现的各种技术。这里主要是用来对图片的处理</p>
<p>json：这个就是json的读写库，处理json文件的</p>
</blockquote>
<h3 id="2-数据理解"><a href="#2-数据理解" class="headerlink" title="2. 数据理解"></a>2. 数据理解</h3><h4 id="数据集初步观察"><a href="#数据集初步观察" class="headerlink" title="数据集初步观察"></a>数据集初步观察</h4><p>分.json的label位置信息，和原图集合</p>
<p><strong>数据读取</strong>： json文件包含的位置信息，除了便于正式的训练，还可以用于数据观察——直接作用在原图集，<strong>查看已给的位置信息的分割效果</strong></p>
<p>样例代码: 数据读取，在此我们给出JSON中标签的读取方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line">train_json = json.load(open(<span class="string">'../input/train.json'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 数据标注处理</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse_json</span><span class="params">(d)</span>:</span></span><br><span class="line">   arr = np.array([</span><br><span class="line">       d[<span class="string">'top'</span>], d[<span class="string">'height'</span>], d[<span class="string">'left'</span>],  d[<span class="string">'width'</span>], d[<span class="string">'label'</span>]</span><br><span class="line">   ])</span><br><span class="line">   arr = arr.astype(int)</span><br><span class="line">   <span class="keyword">return</span> arr</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'../input/train/000000.png'</span>)</span><br><span class="line">arr = parse_json(train_json[<span class="string">'000000.png'</span>])</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>, <span class="number">10</span>))</span><br><span class="line">plt.subplot(<span class="number">1</span>, arr.shape[<span class="number">1</span>]+<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">plt.imshow(img)</span><br><span class="line">plt.xticks([]); plt.yticks([])</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> range(arr.shape[<span class="number">1</span>]):</span><br><span class="line">   plt.subplot(<span class="number">1</span>, arr.shape[<span class="number">1</span>]+<span class="number">1</span>, idx+<span class="number">2</span>)</span><br><span class="line">   plt.imshow(img[arr[<span class="number">0</span>, idx]:arr[<span class="number">0</span>, idx]+arr[<span class="number">1</span>, idx],arr[<span class="number">2</span>, idx]:arr[<span class="number">2</span>, idx]+arr[<span class="number">3</span>, idx]])</span><br><span class="line">   plt.title(arr[<span class="number">4</span>, idx])</span><br><span class="line">   plt.xticks([]); plt.yticks([])</span><br></pre></td></tr></table></figure>



<p>输出</p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gez59nbvuij30z30u0gtm.jpg" alt=""></p>
<p><img src="https://tva1.sinaimg.cn/large/007S8ZIlgy1gez5ab60sij30yw0oaqc0.jpg" alt=""></p>
<h3 id="3-潜在的疑难杂症"><a href="#3-潜在的疑难杂症" class="headerlink" title="3. 潜在的疑难杂症"></a>3. 潜在的疑难杂症</h3><h4 id="预处理细节"><a href="#预处理细节" class="headerlink" title="预处理细节"></a>预处理细节</h4><p>数据集存在原图片<strong>大小不统一</strong>，这个只需要用pytorch的transforms处理即可</p>
<h4 id="难点"><a href="#难点" class="headerlink" title="难点"></a>难点</h4><h5 id="a-确定待识别数字在图中的位置"><a href="#a-确定待识别数字在图中的位置" class="headerlink" title="a.确定待识别数字在图中的位置"></a>a.确定待识别数字在图中的位置</h5><p>(使用比赛简化后的数据，则该问题并不存在了)</p>
<p>在简化数据集之前的难点是：模型要能找到待识别数字的<strong>位置</strong>。但是既然处理后的数据集，<strong>位置信息全都提供了</strong>，那么这个问题就容易很多——<strong>单纯的识别数字信息</strong>。数字的位数问题可以通过简单的算法来解决，就像MNIST数据集一样。</p>
<p><img src="https://crazy-winds.github.io/images/cv1/0-1.png" alt="图1"></p>
<p>（json格式存储label和位置信息）</p>
<p><img src="https://crazy-winds.github.io/images/cv1/0-2.png" alt="图2"></p>
<h5 id="b-确定待识别数字的个数"><a href="#b-确定待识别数字的个数" class="headerlink" title="b.确定待识别数字的个数"></a>b.确定待识别数字的个数</h5><p>即每幅图的数字个数可能均不相同，如何统一的解决(找到一种general的方法)</p>
<p>将在解题思路部分详细展开</p>
<h3 id="4-大致解题思路"><a href="#4-大致解题思路" class="headerlink" title="4. 大致解题思路"></a>4. 大致解题思路</h3><ol>
<li>简单入门思路：定长字符识别。将不定长字符转化为定长处理，不足部分用<strong>填充占位符</strong>为代替</li>
</ol>
<p>（<strong>适合新手</strong>也<strong>适合此题给的处理后的数据集</strong>：赛题数据集中大部分图像中字符个数为2-4个，最多的字符 个数为<strong>6个</strong>）</p>
<p><img src="https://crazy-winds.github.io/images/cv1/0-3.png" alt="图3"></p>
<ol start="2">
<li>专业字符识别思路：按照<strong>不定长字符</strong>处理</li>
</ol>
<p>在字符识别研究中，有<strong>特定的方法</strong>来解决此种不定长的字符识别问题：如<strong>典型的有CRNN字符识别模型</strong>。</p>
<p>因为本次赛题中给定的图像数据都<strong>比较规整，可以视为一个单词或者一个句子</strong> 喂进CRNN模型。</p>
<ol start="3">
<li>专业分类思路：检测位置再识别数字</li>
</ol>
<p>在赛题数据中已经给出了训练集、验证集中所有图片中字符的位置，因此可以首先将字符的位置进行识别，利用<u><strong>物体检测</strong></u>的思路完成。</p>
<p>可参考物体检测模型：<strong>SSD或者YOLO</strong></p>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CV训练营-笔记1-赛题研究"><span class="toc-text">CV训练营-笔记1-赛题研究</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#本文目的"><span class="toc-text">本文目的</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-规则"><span class="toc-text">1.规则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用的Python模块"><span class="toc-text">使用的Python模块</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-数据理解"><span class="toc-text">2. 数据理解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#数据集初步观察"><span class="toc-text">数据集初步观察</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-潜在的疑难杂症"><span class="toc-text">3. 潜在的疑难杂症</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#预处理细节"><span class="toc-text">预处理细节</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#难点"><span class="toc-text">难点</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#a-确定待识别数字在图中的位置"><span class="toc-text">a.确定待识别数字在图中的位置</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#b-确定待识别数字的个数"><span class="toc-text">b.确定待识别数字的个数</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-大致解题思路"><span class="toc-text">4. 大致解题思路</span></a></li></ol></li></ol></li></ol>
  </div>
</div>

  
<nav id="pagination">
  

  

  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
    </div>
  </div>

  <div id="bottom-outer">
    <div id="bottom-inner">
      Site by Kenny Ng using
      <a href="http://hexo.io" target="_blank" rel="noopener">Hexo</a> & <a href="https://github.com/stiekel/hexo-theme-random" target="_blank" rel="noopener">Random</a>
      <br>
      
    </div>
  </div>
</div>

</div>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="https://avatars2.githubusercontent.com/u/2735087?s=60&u=775d4033139cae6b23c593bcf59fa433224ba4e3&v=4">
    <p id="description"></p>
    <ul class="social-icon">
  
  
    <li>
      <a href="https://github.com/stiekel" target="_blank" rel="noopener">
        
          <i class="icon iconfont github">&#xe606;</i>
        
      </a>
    </li>
  
    <li>
      <a href="http://weibo.com/sidcn" target="_blank" rel="noopener">
        
          <i class="icon iconfont weibo">&#xe602;</i>
        
      </a>
    </li>
  
    <li>
      <a href="histkc@gmail.com">
        
          M
        
      </a>
    </li>
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/Kenny_Ng.github.io/js/jquery-2.2.3.min.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/vegas.min.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/random.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/highlight.pack.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/jquery.fancybox.pack.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/Kenny_Ng.github.io/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"preload­Image":true,"transition":["flash"],"timer":true,"delay":1500000,"shuffle":true,"count":12};
var unsplashConfig = {"gravity":"center"};
// is show background images
var turnoffBackgroundImage = false;




var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/Kenny_Ng.github.io/css/sprite.svg'});
</script>
</body>
</html>

